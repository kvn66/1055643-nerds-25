var popup=document.querySelector(".modal-write-us"),overlay=document.querySelector(".overlay"),openPopupButton=document.querySelector(".modal-write-us-open"),closePopupButton=popup.querySelector(".modal-write-us-close"),form=popup.querySelector("form"),fullname=popup.querySelector("[name=fullname]"),email=popup.querySelector("[name=email]"),message=popup.querySelector("[name=message]"),alertDialog=document.querySelector(".alertDialog"),storageAvailable=function(e){var l;try{l=window[e];var o="__storage_test__";return l.setItem(o,o),l.removeItem(o),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&l&&0!==l.length}},toggleModal=function(){overlay.classList.toggle("overlay--show"),popup.classList.toggle("modal--show")};openPopupButton.addEventListener("click",function(e){e.preventDefault(),toggleModal(),fullname.focus(),storageAvailable("localStorage")&&(localStorage.getItem("fullname")&&(fullname.value=localStorage.getItem("fullname"),email.focus()),localStorage.getItem("email")&&(email.value=localStorage.getItem("email"),message.focus()))}),form.addEventListener("submit",function(e){fullname.value&&email.value&&message.value&&fullname.validity.valid&&email.validity.valid?storageAvailable("localStorage")&&(localStorage.setItem("fullname",fullname.value),localStorage.setItem("email",email.value)):(e.preventDefault(),"function"==typeof alertDialog.showModal?(alertDialog.classList.contains("visually-hidden")&&alertDialog.classList.remove("visually-hidden"),alertDialog.showModal()):alert("Необходимо заполнить все поля."))}),closePopupButton.addEventListener("click",function(){toggleModal()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),toggleModal(),popup.classList.contains("modal-show")&&toggleModal())}),overlay.addEventListener("click",function(){toggleModal()});